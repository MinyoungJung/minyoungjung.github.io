<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; Ringsterz Log
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>

  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Blog | Ringsterz Log</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Blog" />
<meta name="author" content="Minyoung Jung" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="하루를 정리하는 데일리 로그" />
<meta property="og:description" content="하루를 정리하는 데일리 로그" />
<link rel="canonical" href="http://localhost:4000/blog/page11/" />
<meta property="og:url" content="http://localhost:4000/blog/page11/" />
<meta property="og:site_name" content="Ringsterz Log" />
<link rel="prev" href="http://localhost:4000/blog/page10" />
<link rel="next" href="http://localhost:4000/blog/page12" />
<script type="application/ld+json">
{"url":"http://localhost:4000/blog/page11/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/public/logo.png"},"name":"Minyoung Jung"},"headline":"Blog","author":{"@type":"Person","name":"Minyoung Jung"},"description":"하루를 정리하는 데일리 로그","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
      <p><span style="font-weight:bolder; font-size:larger;">하루를 정리하는 데일리 로그 </span></p>
      <div style="text-align:center;">
        현재 <strong id="current_date_streak" style="color:#FFC300;">1</strong>일 째 블로깅 중 <br>
        최고 기록:&nbsp;<strong style="color:white;">55</strong>일
      </div>
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <img src="http://www.gravatar.com/avatar/78abf09c8af4042796ff9379143da32f?s=150" title="View on Gravatar" alt="View on Gravatar" style="margin:auto;"/>
      </div>
      <div class="sidebar-personal-info-section">
        <p>원리를 파악하고 만들고 배우는 것을 좋아합니다. 수영과 클라이밍을 즐깁니다.</p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Contact:
        
        
        
        <a href="https://github.com/minyoungjung">
          <i class="fa fa-github fa-2x" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="minyoungjung84@gmail.com">
          <i class="fa fa-envelope fa-2x" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2018 Minyoung Jung.
    </p>
  </div>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">

            <a href="/" title="Home" title="Ringsterz Log">
              <img class="masthead-logo" src="/public/logo.png"/>
            </a>
            Log for everything - Day <div style="display:inline"; id="dynamic_day"></div>
          </h3>
        </div>
      </div>



      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/2017/06/05/overriding-python-standard-library/">
        파이썬 오브젝트 소스코드 간단히 보기 및 스탠다드 라이브러리 메소드 오버라이딩
      </a>
    </h1>

    <span class="post-date">05 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#python" class="post-tag">Python</a>
    
    <a href="/blog/tags/#python-calendar" class="post-tag">Python Calendar</a>
    
    

    <article>
      <h1 id="파이썬-오브젝트-소스-코드-보기">파이썬 오브젝트 소스 코드 보기</h1>
<ol>
  <li>
    <p><code class="highlighter-rouge">inspect</code> 모듈 임포트
<code class="highlighter-rouge">import inspect</code></p>
  </li>
  <li>
    <p>살펴볼 오브젝트 임포트
<code class="highlighter-rouge">from calendar import HTMLCalendar</code></p>
  </li>
  <li>
    <p>소스코드를 보기좋은 형태로 출력
<code class="highlighter-rouge">print(inspect.getsource(HTMLCalendar))</code></p>
  </li>
</ol>

<h1 id="스탠다드-라이브러리-메소드-오버라이딩">스탠다드 라이브러리 메소드 오버라이딩</h1>
<p>HTMLCalendar는 베이스 클래스인 Calendar를 상속받아 HTML 달력을 만들어주는 역할을 하는 클래스이다.<br />
0(월요일:디폴트)에서 6(일요일)까지 달력의 시작을 정의하는 하나의 firstweekday인자를 전달받는다.</p>

<p><code class="highlighter-rouge">print(calendar.HTMLCalendar(6).formatmonth(2017,6))</code>과 같이 입력하면 아래의 달력이 출력된다.</p>

<table border="0" cellpadding="0" cellspacing="0" class="month">
<tr><th colspan="7" class="month">June 2017</th></tr>
<tr><th class="sun">Sun</th><th class="mon">Mon</th><th class="tue">Tue</th><th class="wed">Wed</th><th class="thu">Thu</th><th class="fri">Fri</th><th class="sat">Sat</th></tr>
<tr><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="thu">1</td><td class="fri">2</td><td class="sat">3</td></tr>
<tr><td class="sun">4</td><td class="mon">5</td><td class="tue">6</td><td class="wed">7</td><td class="thu">8</td><td class="fri">9</td><td class="sat">10</td></tr>
<tr><td class="sun">11</td><td class="mon">12</td><td class="tue">13</td><td class="wed">14</td><td class="thu">15</td><td class="fri">16</td><td class="sat">17</td></tr>
<tr><td class="sun">18</td><td class="mon">19</td><td class="tue">20</td><td class="wed">21</td><td class="thu">22</td><td class="fri">23</td><td class="sat">24</td></tr>
<tr><td class="sun">25</td><td class="mon">26</td><td class="tue">27</td><td class="wed">28</td><td class="thu">29</td><td class="fri">30</td><td class="noday">&nbsp;</td></tr>
</table>

<p>오브젝트 소스코드를 살펴보고 HTML Calendar의 첫번째 row에 좌/우 이동 화살표(&lt;,&gt;)를 출력해보자.</p>

<p><strong>파이썬 라이브러리 코드</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">formatmonthname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theyear</span><span class="p">,</span> <span class="n">themonth</span><span class="p">,</span> <span class="n">withyear</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="s">"""
    Return a month name as a table row.
    """</span>
    <span class="k">if</span> <span class="n">withyear</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="p">(</span><span class="n">month_name</span><span class="p">[</span><span class="n">themonth</span><span class="p">],</span> <span class="n">theyear</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="n">month_name</span><span class="p">[</span><span class="n">themonth</span><span class="p">]</span>
    <span class="k">return</span> <span class="s">'&lt;tr&gt;&lt;th colspan="7" class="month"&gt;</span><span class="si">%</span><span class="s">s&lt;/th&gt;&lt;/tr&gt;'</span> <span class="o">%</span> <span class="n">s</span>
</code></pre></div></div>

<p>주석을 보면 달 이름을 테이블 행 형태로 돌려주는 메소드이고, 리턴값은 HTML의 형태인 것을 알 수 있다.<br />
해당 메소드를 바로 오버라이딩 하면 <code class="highlighter-rouge">month_name[themonth]</code> 구문에서 오류가 뜨는데,<br />
month_name은 calendar 모듈의 Data 속성이므로 <code class="highlighter-rouge">from calendar import month_name</code>를 해야한다.</p>

<p><strong>오버라이딩한 메소드</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">calendar</span> <span class="kn">import</span> <span class="n">HTMLCalendar</span><span class="p">,</span> <span class="n">month_name</span>

<span class="k">class</span> <span class="nc">ArrowCalendar</span><span class="p">(</span><span class="n">HTMLCalendar</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">firstweekday</span><span class="p">):</span>
        <span class="n">HTMLCalendar</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">firstweekday</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">formatmonthname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">withyear</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">withyear</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="p">(</span><span class="n">month_name</span><span class="p">[</span><span class="n">month</span><span class="p">],</span> <span class="n">year</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="n">month_name</span><span class="p">[</span><span class="n">month</span><span class="p">]</span>
        <span class="k">return</span> <span class="s">'&lt;tr&gt;&lt;th colspan="1" class="month_arrow"&gt; &lt; &lt;/th&gt;'</span> \
            <span class="s">'&lt;th colspan="5" class="month"&gt;</span><span class="si">%</span><span class="s">s&lt;/th&gt;'</span> \
            <span class="s">'&lt;th colspan="1" class="month_arrow"&gt; &gt; &lt;/th&gt;&lt;/tr&gt;'</span> <span class="o">%</span> <span class="n">s</span>
</code></pre></div></div>
<p>7칸짜리 테이블로 달 이름을 넘겨주는 것을 5칸으로 줄이고 양쪽에 한칸씩 좌/우 화살표를 넣었다.<br />
이후 css 클래스를 적용해서 화살표를 정렬하면 완성</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.month_arrow</span> <span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="완성된-달력">완성된 달력</h2>
<table border="0" cellpadding="0" cellspacing="0" class="month">
<tr><th colspan="1" class="month_arrow"> &lt; </th><th colspan="5" class="month">June 2017</th><th colspan="1" class="month_arrow"> &gt; </th></tr>
<tr><th class="sun">Sun</th><th class="mon">Mon</th><th class="tue">Tue</th><th class="wed">Wed</th><th class="thu">Thu</th><th class="fri">Fri</th><th class="sat">Sat</th></tr>
<tr><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="thu">1</td><td class="fri">2</td><td class="sat">3</td></tr>
<tr><td class="sun">4</td><td class="mon">5</td><td class="tue">6</td><td class="wed">7</td><td class="thu">8</td><td class="fri">9</td><td class="sat">10</td></tr>
<tr><td class="sun">11</td><td class="mon">12</td><td class="tue">13</td><td class="wed">14</td><td class="thu">15</td><td class="fri">16</td><td class="sat">17</td></tr>
<tr><td class="sun">18</td><td class="mon">19</td><td class="tue">20</td><td class="wed">21</td><td class="thu">22</td><td class="fri">23</td><td class="sat">24</td></tr>
<tr><td class="sun">25</td><td class="mon">26</td><td class="tue">27</td><td class="wed">28</td><td class="thu">29</td><td class="fri">30</td><td class="noday">&nbsp;</td></tr>
</table>


    <article>
    <div class="post-more">
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/2017/06/05/overriding-python-standard-library/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/2017/06/05/overriding-python-standard-library/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D/2017/06/04/tensorflow-demo/">
        Google의 머신러닝 라이브러리, 텐서플로 알아보기 - 환경설정 및 설치
      </a>
    </h1>

    <span class="post-date">04 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#machine-learning" class="post-tag">Machine Learning</a>
    
    <a href="/blog/tags/#ai" class="post-tag">AI</a>
    
    <a href="/blog/tags/#tensorflow" class="post-tag">Tensorflow</a>
    
    

    <article>
      <h1 id="설치">설치</h1>

<ol>
  <li>파이썬3 가상환경 생성<br />
<code class="highlighter-rouge">$ virtualenv --system-site-packages -p python3 타겟폴더 이름 # Python3 기준</code></li>
  <li>가상환경 실행<br />
<code class="highlighter-rouge">$ source ~/tensorflow/bin/activate</code></li>
  <li>텐서플로 설치<br />
<code class="highlighter-rouge">$ pip3 install --upgrade tensorflow</code> # CPU 버전, GPU 버전은 tensorflow-gpu로 설치</li>
  <li>데모파일 작성 (<code class="highlighter-rouge">demo.py</code>)</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="n">tf</span>

<span class="n">node1</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">tf</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">node2</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span> <span class="c"># also tf.float32 implicitly</span>
<span class="k">print</span><span class="p">(</span><span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">)</span>
</code></pre></div></div>
<p><strong>실행 결과</strong><br />
<code class="highlighter-rouge">Tensor("Const:0", shape=(), dtype=float32) Tensor("Const_1:0", shape=(), dtype=float32)</code><br />
위와 같이 출력되면 환경설정은 완료</p>

<p><a href="https://www.tensorflow.org/install/install_mac">공식 설치문서</a></p>

<h1 id="주요개념">주요개념</h1>

<h2 id="tensor">Tensor</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3 # a rank 0 tensor; this is a scalar with shape []
[1. ,2., 3.] # a rank 1 tensor; this is a vector with shape [3]
[[1., 2., 3.], [4., 5., 6.]] # a rank 2 tensor; a matrix with shape [2, 3]
[[[1., 2., 3.]], [[7., 8., 9.]]] # a rank 3 tensor with shape [2, 1, 3]
</code></pre></div></div>
<p>Tensorflow의 기본 자료구조.  <br />
동적인 크기를 갖는 원시값의 다차원 데이터 배열이며 Tensor의 rank는 차원을 의미한다.</p>

<h2 id="computational-graph">Computational Graph</h2>
<p>노드 그래프로 배열된 일련의 텐서플로우 오퍼레이션 모음.<br />
Tensorflow의 코어는 Computational Graph를 생성하고, 실행하는 각각의 부분으로 나뉜다.<br />
그리하여 데모파일의 실행 결과가 각각의 노드값이 아닌 두개의 텐서가 출력된 것.</p>

<h3 id="computational-graph-실행">Computational Graph 실행</h3>
<ol>
  <li>Session을 생성하고</li>
  <li>Session.run()을 실행
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sess = tf.Session()
print(sess.run([node1, node2]))
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>실행결과</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2017-06-04 22:24:47.634630: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
[3.0, 4.0]
</code></pre></div></div>
<p>워닝이 뜨기는 했지만 결과값은 제대로 출력되었다.<br />
구글링해보니 로컬에서 소스코드를 빌드하지 않았을 경우 뜨는 오류라 한다.<br />
해결방법 : <a href="http://www.kwangsiklee.com/ko/2017/04/%ED%85%90%EC%84%9C%ED%94%8C%EB%A1%9C%EC%9A%B0-%EA%B2%BD%EA%B3%A0%EB%A9%94%EC%84%B8%EC%A7%80-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0-the-tensorflow-library-wasnt-compiled-to-use-sse3-instructions/">링크</a></p>

<h2 id="기타-더-읽어볼거리">기타 더 읽어볼거리</h2>
<p><a href="https://tensorflowkorea.gitbooks.io/tensorflow-kr/content/g3doc/get_started/basic_usage.html">텐서플로우 문서 한글 번역본</a><br />
<a href="http://www.popit.kr/%ED%85%90%EC%84%9C%ED%94%8C%EB%A1%9C%EC%9A%B0tensorflow-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/">텐서플로우 시작하기</a><br />
<a href="http://pythonkim.tistory.com/39">텐서보드 사용법</a></p>

<h1 id="최종목표">최종목표</h1>
<p>텐서플로우를 이용한 Android app 작성</p>


    <article>
    <div class="post-more">
      
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D/2017/06/04/tensorflow-demo/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D/2017/06/04/tensorflow-demo/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%B8%94%EB%A1%9C%EA%B7%B8/2017/06/03/jekyll-custom-plugin-develop-and-adopt-to-github-(2)/">
        Jekyll 커스텀 플러그인 개발 및 적용, Github 페이지에 적용하기 (2)
      </a>
    </h1>

    <span class="post-date">03 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#github" class="post-tag">Github</a>
    
    <a href="/blog/tags/#blog" class="post-tag">Blog</a>
    
    <a href="/blog/tags/#jekyll" class="post-tag">Jekyll</a>
    
    <a href="/blog/tags/#tag" class="post-tag">Tag</a>
    
    

    <article>
      <h1 id="지난-포스팅">지난 포스팅</h1>

<p><a href="/환경설정/블로그/2017/06/02/jekyll-custom-plugin-develop-and-adopt-to-github/">Jekyll 커스텀 플러그인 개발 및 적용, Github 페이지에 적용하기</a></p>

<h1 id="발단">발단</h1>
<p>다시 하루가 지나고 Github page에 접속하자, 어제 만든 플러그인이 동작하지 않았다.<br />
<code class="highlighter-rouge">total_blogging_date</code> 태그가 동작하지 않아 하루가 지났음에도 총 일수가 더해지지 않은 것.<br />
한참 루비코드만 들여다보다 생각해보니, Jekyll 자체가 정적인 페이지를 생성하는데 페이지를 빌드하지 않았는데도 갱신되는게 말이 안되는 상황.<br />
계속해서 소스를 수정하면서 빌드하다보니, 제대로 동작하는 것으로 오해하게 된 것이었다.</p>

<h1 id="해결-방안">해결 방안</h1>
<p>총 블로깅 일수를 태그로 받았을때, 현재 날짜와 총 날짜를 계산할 때 사용된 마지막 날짜의 비교가 불가능하다.<br />
태그에서 받은 총 블로깅 날짜만을 가지고 빌드하지 않은채로 며칠이 지났는지 알 방법이 없고,<br />
혹여 있다해도 그냥 템플릿에서 가장 오래된 포스팅 날짜와 현재 날짜의 차이를 비교하는 것이 편하다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Calculate total_blogging_date_dynamically</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">date_str</span> <span class="o">=</span> <span class="s2">"{{ site.posts.last.date }}"</span><span class="p">;</span> <span class="c1">// 2017-05-31 00:00:00 +0900</span>
  <span class="kd">var</span> <span class="nx">total_date</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">date_str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">/</span> <span class="mi">86400000</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// calc datediff</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">"#dynamic_day"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">total_date</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>
<p><del>결국 위와 같이 템플릿에서 받아온 날짜를 가지고, 매크로 형태로 JQuery에 적용시킴으로 해결.</del> <br />
며칠 후 갑자기 날짜가 맞지않아 생각해보니, 그냥 내림을 해서 계산하면 안된다…<br />
결국 시간단위를 제외한 Date값을 연산하는 아래와 같은 방법으로 로직 수정하여 해결.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">date_str</span> <span class="o">=</span> <span class="s2">"2017-05-31 00:00:00 +0900"</span><span class="p">;</span> <span class="c1">// 2017-05-31 00:00:00 +0900</span>
  <span class="kd">var</span> <span class="nx">today</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
  <span class="nx">today</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">firstday</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">date_str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
  <span class="nx">firstday</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">total_date</span> <span class="o">=</span> <span class="p">((</span><span class="nx">today</span><span class="o">-</span><span class="nx">firstday</span><span class="p">)</span> <span class="o">/</span> <span class="mi">86400000</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// calc datediff</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">"#dynamic_day"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">total_date</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p><br />
마찬가지로 며칠째 포스팅을 이어가고 있는지도 마지막 빌드 이후 며칠이 지났는지 알수 없기에,</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">latest_post_date_str</span> <span class="o">=</span> <span class="s2">"{{ site.posts.first.date }}"</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">day_passed</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">latest_post_date_str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">/</span> <span class="mi">86400000</span><span class="p">);</span>
  <span class="c1">// if latest posting date passed a day then reset to 0</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">day_passed</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#current_date_streak"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">"0"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>
<p>위와 같이 템플릿에서 받아온 값을 마지막 포스팅의 날짜와 현재 날짜가 하루이상 지났을때,<br />
<code class="highlighter-rouge">current_date_streak</code> 태그 값을 0으로 덮어씌우도록 수정했다.</p>

<h1 id="추가-문제점">추가 문제점</h1>
<p>sitemap이 정적페이지로 빌드하다보니, <code class="highlighter-rouge">site.url</code>값이 로컬이 반영된 값인 localhost가 들어가 버린다…<br />
결국 사이트맵 내의 <code class="highlighter-rouge">site.url</code> 값을 github pages 주소로 하드코딩.</p>

<h1 id="마무리">마무리</h1>
<p>Github Plugin 코드 및 README를 업데이트 했다. <a href="https://github.com/MinyoungJung/jekyll-plugin-blogStreak">링크</a></p>


    <article>
    <div class="post-more">
      
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%B8%94%EB%A1%9C%EA%B7%B8/2017/06/03/jekyll-custom-plugin-develop-and-adopt-to-github-(2)/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%B8%94%EB%A1%9C%EA%B7%B8/2017/06/03/jekyll-custom-plugin-develop-and-adopt-to-github-(2)/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%B8%94%EB%A1%9C%EA%B7%B8/2017/06/02/jekyll-custom-plugin-develop-and-adopt-to-github/">
        Jekyll 커스텀 플러그인 개발 및 적용, Github 페이지에 적용하기
      </a>
    </h1>

    <span class="post-date">02 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#github" class="post-tag">Github</a>
    
    <a href="/blog/tags/#blog" class="post-tag">Blog</a>
    
    <a href="/blog/tags/#jekyll" class="post-tag">Jekyll</a>
    
    <a href="/blog/tags/#tag" class="post-tag">Tag</a>
    
    <a href="/blog/tags/#plugin" class="post-tag">Plugin</a>
    
    

    <article>
      <h1 id="발단">발단</h1>
<p class="message"> Jekyll로 구성한 블로그 디자인을 수정하며 조금씩 구색을 맞추기 시작했다.<br /> 
사이트맵을 추가해 구글에서 검색되지 않는 부분도 수정하고, &nbsp;<a href="http://tech.kakao.com/2016/07/07/tech-blog-story/" target="_blank">Kakao Tech 참고자료</a><br />
어날리틱스 &amp; 서치콘솔 연동과 같은 소소한 부분도 처리했다. <br /> 
"블로그 자체에 큰 노력을 들이지 않고 컨텐츠에 집중해 매일 무엇인가 정리해보자"는 취지도 이때까지는<br /> 맞는듯 했다... </p>

<blockquote>
  <p>하지만 데일리 로그라는 명목하에, 블로그 첫 게시일로부터 며칠이 지났고, 며칠째 포스팅을 이어가고 있는지 표시하고 싶다는 생각이 들었다.</p>
</blockquote>

<h1 id="커스텀-플러그인-개발">커스텀 플러그인 개발</h1>
<p>Jekyll 환경변수, Liquid 템플릿 태그 등을 확인해 보았는데 마땅한 방법이 보이지 않았다.<br />
어딘가에 있을법한 기능인데도 찾기가 쉽지 않아 기존 플러그인 몇 개의 소스를 들여다 보고 자체 제작하기로 했다.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">RenderTotalBloggingDate</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="n">site</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="nf">registers</span><span class="p">[</span><span class="ss">:site</span><span class="p">]</span>
      <span class="p">(</span><span class="no">Date</span><span class="p">.</span><span class="nf">today</span><span class="p">()</span> <span class="o">-</span> <span class="no">Date</span><span class="p">.</span><span class="nf">strptime</span><span class="p">(</span><span class="n">site</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">docs</span><span class="p">.</span><span class="nf">first</span><span class="p">.</span><span class="nf">date</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-%d'</span><span class="p">),</span> <span class="s1">'%Y-%m-%d'</span><span class="p">)).</span><span class="nf">to_i</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="n">liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'total_blogging_date'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span> <span class="no">RenderTotalBloggingDate</span><span class="p">)</span>
</code></pre></div></div>
<p>루비는 예전에 간단히 레일스를 만져볼때 빼고는 다뤄본적이 없어, 라이브러리나 문법등이 기억이 나지 않았다.<br />
다행히 플러그인 구조가 간단하기에 큰 문제가 되지는 않았다.</p>

<h2 id="플러그인-구조">플러그인 구조</h2>
<ol>
  <li>Jekyll 모듈에서 <code class="highlighter-rouge">Liquid::Tag</code>를 상속받은 클래스를 생성한다.</li>
  <li><code class="highlighter-rouge">render(context)</code>함수를 오버라이딩 한다.</li>
  <li><code class="highlighter-rouge">liquid::Template.register_tag('태그이름', Jekyll:: 태그 클래스 이름)</code>과 같이 태그를 등록한다.</li>
  <li>등록된 태그는 템플릿에서 <code class="highlighter-rouge">{% 태그이름 %}</code>과 같이 사용가능하다.</li>
</ol>

<h2 id="플러그인-적용">플러그인 적용</h2>
<ol>
  <li>블로그 경로에 <code class="highlighter-rouge">_plugins</code> 폴더를 생성한다.</li>
  <li>원하는 곳에 태그를 넣는다.</li>
</ol>

<h1 id="github-page로-적용">Github page로 적용?</h1>
<p class="message"> 로컬에서 잘 동작하는 것을 확인하고, Github로 페이지를 푸쉬했다.<br />그리고... </p>
<p><img src="/post_assets/2017-06-02/mail_from_github.png" alt="깃허브에서 온 메일" /></p>
<p style="color:red; font-weight:bold;">빌드가 실패했다!</p>

<h2 id="원인-분석">원인 분석</h2>
<p>여전히 Tag가 인식되지 않는단다. 이유를 확인해보니, 보안상의 이유로 <a href="https://github.com/github/pages-gem">github/pages-gem</a>을<br />
제외한 커스톰 plugin을 Github에서는 공식 사용할 수 없게 되어있다.</p>

<h2 id="해결방안">해결방안</h2>
<p>다행히 Workaround가 존재한다. 자세한 것은 다른 분의 링크로 대체.
<a href="http://gumpcha.github.io/blog/github-pages-with-jekyll-custom-plugin/" target="_blank">링크</a>
간단히 요약하면,</p>
<ol>
  <li>Jekyll이 생성하는 정적 페이지인 <code class="highlighter-rouge">_site</code>폴더를 Github에 Master 브랜치로 등록한다.</li>
  <li>소스코드를 담은 기존 Master 브랜치는 Source 브랜치로 따로 딴 후, Source에서 동일하게 포스팅을 작성한다.</li>
  <li><code class="highlighter-rouge">Jekyll serve</code>를 실행하면 템플릿 태그는 전부 정적 리소스로 변경된다.</li>
  <li>정적 리소스만 포함한 마스터 브랜치(<code class="highlighter-rouge">_site</code> 폴더)와 Source 브랜치를 모두 Github에 푸시한다.</li>
  <li>마스터 브랜치를 삭제한다.</li>
</ol>

<h2 id="문제점">문제점</h2>
<p>매번 포스팅 할때마다 브랜치를 새로 생성하고 Source에서 작업하고 다시 Master를 삭제하는 방법을 사용해야 한다.<br />
다행히 쉘 스크립트를 이용해서 간편하게 해결 가능하다.<br />
<code class="highlighter-rouge">publish.sh</code>를 다음과 같이 블로그 폴더에 생성하고,</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

git checkout <span class="nb">source
</span>git branch <span class="nt">-D</span> master
git checkout <span class="nt">-b</span> master 
git filter-branch <span class="nt">--subdirectory-filter</span> _site/ <span class="nt">-f</span>
git push <span class="nt">--all</span>
git checkout <span class="nb">source</span>
</code></pre></div></div>
<p>필요한 일련의 명령들을 하나로 모은다.</p>

<p>그 이후 블로그를 작성하는 방법은 아래와 같다.</p>

<h1 id="블로그-퍼블리싱">블로그 퍼블리싱</h1>
<ol>
  <li><code class="highlighter-rouge">_posts</code> 폴더에 마크다운 작성</li>
  <li><code class="highlighter-rouge">(source) $ jekyll serve</code> 로 정적 사이트 생성</li>
  <li><code class="highlighter-rouge">(source) $ git add .</code></li>
  <li><code class="highlighter-rouge">(source) $ git commit -m 'Commit message'</code></li>
  <li><code class="highlighter-rouge">(source) $ ./publish.sh</code></li>
</ol>

<h1 id="plugin-링크">Plugin 링크</h1>
<p><a href="https://github.com/MinyoungJung/jekyll-plugin-blogStreak">깃허브</a></p>

<h2 id="사용법">사용법</h2>
<ol>
  <li>블로그 폴더 안에 <code class="highlighter-rouge">_plugins</code> 폴더를 생성한다.</li>
  <li><code class="highlighter-rouge">blog_streak.rb</code> 파일을 <code class="highlighter-rouge">_plugins</code> 폴더에 넣는다.</li>
  <li>템플릿에 태그를 넣는다. <code class="highlighter-rouge">{% 태그이름 %}</code></li>
</ol>

<h2 id="태그-종류">태그 종류</h2>
<ul>
  <li><del><code class="highlighter-rouge">{% total_blogging_date %}</code></del><br />
<del>첫 포스팅부터 현재까지 지난 일 수</del></li>
  <li><code class="highlighter-rouge">{% current_date_streak %}</code><br />
현재 연속 포스팅 일 수 (포스팅을 하지 않고 하루를 넘기면 초기화 됨)</li>
  <li><code class="highlighter-rouge">{% longest_date_streak %}</code><br />
최장 연속 포스팅 일 수 (첫 포스팅부터 현재까지 최장 연속 포스팅 일 수)</li>
</ul>

<p><a href="/환경설정/블로그/2017/06/03/jekyll-custom-plugin-develop-and-adopt-to-github-(2)/">Jekyll 커스텀 플러그인 개발 및 적용, Github 페이지에 적용하기(2)</a></p>


    <article>
    <div class="post-more">
      
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%B8%94%EB%A1%9C%EA%B7%B8/2017/06/02/jekyll-custom-plugin-develop-and-adopt-to-github/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/%EB%B8%94%EB%A1%9C%EA%B7%B8/2017/06/02/jekyll-custom-plugin-develop-and-adopt-to-github/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/mac%20%EC%82%AC%EC%9A%A9%ED%8C%81/2017/06/01/mac-finder-tagging-special-character/">
        Mac Finder에서 Tag를 이용한 파일 분류, Mac 키보드의 특수문자 입력하기
      </a>
    </h1>

    <span class="post-date">01 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#tag" class="post-tag">Tag</a>
    
    <a href="/blog/tags/#mac" class="post-tag">Mac</a>
    
    

    <article>
      <h2 id="mac-finder에서-tag를-이용해-파일-분류하기">Mac Finder에서 Tag를 이용해 파일 분류하기</h2>
<p>Jekyll을 이용해 포스팅을 하려니 포스팅 폴더 접근이 귀찮았다.<br />
보통 이런 경우 Finder의 즐겨찾기에 작업 폴더를 추가하여 사용하는데, <code class="highlighter-rouge">_posts</code> 폴더의 언더바가 마음에 거슬려 태그를 이용해 정리하기로 했다.</p>

<h3 id="tag-이용방법">Tag 이용방법</h3>
<ol>
  <li>Finder를 연다.</li>
  <li><code class="highlighter-rouge">⌘</code>(커맨드)+<code class="highlighter-rouge">,</code>(콤마)를 눌러 Finder 환경 설정으로 들어간다.</li>
  <li><code class="highlighter-rouge">태그</code> 탭에서 Tag 이름 및 색상을 수정한다
<img src="/post_assets/2017-06-01/finder_settings.png" alt="태그 수정" />
    <ul>
      <li>위쪽 목록 영역은 사이드바, 아래쪽 즐겨찾기 태그 부분은 Finder에서 파일을 우클릭 했을때 나타나는 즐겨찾기 메뉴</li>
    </ul>
  </li>
  <li>Tag를 이용하여 분류한 파일 
<img src="/post_assets/2017-06-01/finder_sidebar.png" alt="태그를 이용해 분류" /></li>
</ol>

<p><br /></p>
<h2 id="mac-키보드의-특수문자등-입력하기">Mac 키보드의 특수문자(⌘⎋⌥⌃등) 입력하기</h2>
<p>포스팅을 하다보니 맥 키보드에 존재하는 특수문자를 입력해야 하는 경우가 생긴다.<br />
한번 설정하면 계속 남아있긴 하지만 설정법 등은 매번 잊어버리고 인터넷에서 다시 찾게되는 경향이 있어 정리했다.</p>

<h3 id="특수문자-추가-방법">특수문자 추가 방법</h3>
<ol>
  <li><code class="highlighter-rouge">⌘</code>(커맨드)+<code class="highlighter-rouge">⌃</code>(컨트롤)+<code class="highlighter-rouge">⌴</code>(스페이스)를 눌러 특수문자 입력창을 띄운다.</li>
  <li>왼쪽 위의 <code class="highlighter-rouge">목록 사용자화</code>를 선택한다.
<img src="/post_assets/2017-06-01/special character_customize.png" alt="목록 사용자화" /></li>
  <li>목록에서 <code class="highlighter-rouge">기술 기호</code>를 선택하면 특수문자 입력창에 추가된다.
<img src="/post_assets/2017-06-01/special_character_setting.png" alt="기술기호 선택" /></li>
</ol>


    <article>
    <div class="post-more">
      
      <a href="/mac%20%EC%82%AC%EC%9A%A9%ED%8C%81/2017/06/01/mac-finder-tagging-special-character/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/mac%20%EC%82%AC%EC%9A%A9%ED%8C%81/2017/06/01/mac-finder-tagging-special-character/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page12">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/page10">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-67856795-3', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//ringsterz.disqus.com/count.js" async></script>
  

  <!--Import jQuery -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>

  <script>
    // Calculate total_blogging_date_dynamically
    $(document).ready(function() {
      var date_str = "2017-05-31 00:00:00 +0900"; // 2017-05-31 00:00:00 +0900
      var today = new Date()
      today.setHours(0,0,0,0)
      var firstday = new Date(date_str.split(' ')[0])
      firstday.setHours(0,0,0,0)
      var total_date = ((today-firstday) / 86400000)+1; // calc datediff
      $("#dynamic_day").text(total_date);
    });

    // Calculate current_date_streak dynamically
    $(document).ready(function(){
      var latest_post_date_str = "2018-04-11 00:00:00 +0900";
      var day_passed = Math.floor((Date.now() - Date.parse(latest_post_date_str.split(' ')[0])) / 86400000);
      // if latest posting date passed a day then reset to 0
      if (day_passed > 1) {
        $("#current_date_streak").text("0");
      }
    });
  </script>
</html>
