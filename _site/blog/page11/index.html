<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; Ringsterz Log
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  

  <!-- Adsense -->
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4842709304550263",
        enable_page_level_ads: true
      });
    </script>
</head>

  <!-- Begin Jekyll SEO tag v2.6.0 -->
<title>Page 11 of 12 for Blog | Ringsterz Log</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Blog" />
<meta name="author" content="Minyoung Jung" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="하루를 정리하는 데일리 로그" />
<meta property="og:description" content="하루를 정리하는 데일리 로그" />
<link rel="canonical" href="http://localhost:4000/blog/page11/" />
<meta property="og:url" content="http://localhost:4000/blog/page11/" />
<meta property="og:site_name" content="Ringsterz Log" />
<link rel="prev" href="http://localhost:4000/blog/page10" />
<link rel="next" href="http://localhost:4000/blog/page12" />
<script type="application/ld+json">
{"headline":"Blog","url":"http://localhost:4000/blog/page11/","author":{"@type":"Person","name":"Minyoung Jung"},"description":"하루를 정리하는 데일리 로그","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/public/logo.png"},"name":"Minyoung Jung"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
      <p><span style="font-weight:bolder; font-size:larger;">하루를 정리하는 데일리 로그 </span></p>
      <div style="text-align:center;">
        현재 <strong id="current_date_streak" style="color:#FFC300;">1</strong>일 째 블로깅 중 <br>
        최고 기록:&nbsp;<strong style="color:white;">55</strong>일
      </div>
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <img src="http://www.gravatar.com/avatar/78abf09c8af4042796ff9379143da32f?s=150" title="View on Gravatar" alt="View on Gravatar" style="margin:auto;"/>
      </div>
      <div class="sidebar-personal-info-section">
        <p>원리를 파악하고 만들고 배우는 것을 좋아합니다. 수영과 클라이밍을 즐깁니다.</p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Contact:
        
        
        
        <a href="https://github.com/minyoungjung">
          <i class="fa fa-github fa-2x" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="minyoungjung84@gmail.com">
          <i class="fa fa-envelope fa-2x" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2020 Minyoung Jung.
    </p>
  </div>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">

            <a href="/" title="Home" title="Ringsterz Log">
              <img class="masthead-logo" src="/public/logo.png"/>
            </a>
            Log for everything - Day <div style="display:inline"; id="dynamic_day"></div>
          </h3>
        </div>
      </div>



      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/django/%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4/2017/06/09/django-scheduler-(2)/">
        Django를 이용한 스케쥴러 제작 (2) - 구현
      </a>
    </h1>

    <span class="post-date">09 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#django" class="post-tag">Django</a>
    
    <a href="/blog/tags/#web-service" class="post-tag">Web service</a>
    
    <a href="/blog/tags/#python" class="post-tag">Python</a>
    
    <a href="/blog/tags/#scheduler" class="post-tag">Scheduler</a>
    
    <a href="/blog/tags/#material-design" class="post-tag">Material Design</a>
    
    

    <article>
      <h1 id="구현">구현</h1>
<h2 id="todolist">Todolist</h2>
<p>Django의 Generic view를 이용해 구현했다.<br />
TodayArchiveView/DayArchiveView를 이용해 해당 날짜의 할일들을 보여주었다.</p>

<h2 id="calendar">Calendar</h2>
<p>Python standard library의 HTMLCalendar를 이용해 구현했다.<br />
지난달/다음달로 이동할 수 있는 화살표를 추가하고, Workout 테이블을 조회하여 리스트를 해당 날짜에 뿌려주었다.</p>

<h2 id="stats">Stats</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">id</th>
      <th style="text-align: center">create_date</th>
      <th style="text-align: center">workout_done</th>
      <th style="text-align: center">owner_id</th>
      <th style="text-align: center">workout_id</th>
      <th style="text-align: center">duration</th>
      <th style="text-align: center">workout_date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">PK</td>
      <td style="text-align: center">생성일</td>
      <td style="text-align: center">운동 수행여부</td>
      <td style="text-align: center">소유자</td>
      <td style="text-align: center">FK(List)</td>
      <td style="text-align: center">수행시간(분)</td>
      <td style="text-align: center">수행 날짜</td>
    </tr>
  </tbody>
</table>

<p>Workout 테이블에서 owner를 필터로 쿼리셋을 뽑아낸 후, duration의 평균을 구해 matplotlib으로 출력하였다.<br />
별도의 DB 테이블에 각각의 평균값을 운동 수행 결과 표시 시마다 계산하여 저장하고,<br />
해당 테이블을 조회하는 것이 훨씬 빠르겠지만, 일단은 나 혼자 쓰는 서비스니까 그냥 전체 DB를 검색하기로 결정.<br />
Django 철학에도 있지않은가.. <code class="highlighter-rouge">Simple is better than complex</code> <del>이럴때 쓰란말은 아니지만…</del>
<br />
여러 종류의 그래프를 통해 다양한 그래프를 출력하고 싶었지만, 막상 데이터가 여러 방법으로 보여줄 것이 없었다.<br />
워낙 DB 구성이 단순하니까… 나중에 더 생각나면 추가하기로 했다.</p>

<h2 id="로그인관리자-기능">로그인/관리자 기능</h2>
<p>Django의 기본 Auth와 Admin을 이용했다.<br />
혼자 쓰는 서비스이지만 결국 웹에 올려놓을 테니.. 로그인 기능이 필요하긴 했다.</p>

<h1 id="스크린샷">스크린샷</h1>
<h2 id="todolist-1">Todolist</h2>
<p><img src="/post_assets/2017-06-09/todolist.png" alt="할일목록" /></p>

<h2 id="calendar-1">Calendar</h2>
<p><img src="/post_assets/2017-06-09/calendar.png" alt="캘린더" /></p>

<h2 id="stats-1">Stats</h2>
<p><img src="/post_assets/2017-06-09/stats.png" alt="그래프" /></p>

<h2 id="모바일-대응-메뉴">모바일 대응 메뉴</h2>
<p><img src="/post_assets/2017-06-09/mobile-react.png" alt="모바일 대응" /></p>

<h1 id="마무리">마무리</h1>
<p>간단히 시작한 프로젝트였지만, 막상 너무 간단한게 아닌가하는 생각이 들어 무엇인가를 추가하려 했다.<br />
하지만 기능은 추가하고 싶고 마땅히 추가할 기능은 없고… 점점 본질에서 멀어져가며 흥미가 떨어지는 것을 느끼고,<br />
이러다가는 프로젝트를 완성하지도 못할 것 같아 다시 초심으로 돌아가 간단히 마무리했다.<br />
일단은 이것으로 프로젝트 구현을 마치고, 스스로 사용해보고 마음에 들면 개선하고 추가해 볼 생각이다.</p>

<h1 id="추후-계획">추후 계획</h1>
<ol>
  <li>각종 버그 수정… (귀찮지 않다면…)</li>
  <li>데이터 분석 및 그래프 기능 확장</li>
  <li>데이터 입력 기능 편하게 만들기 (현재는 혼자 쓰니 그냥 어드민으로 넣음..)</li>
  <li>간단한 소셜 기능 (옵션)</li>
</ol>

<h1 id="서비스-링크">서비스 링크</h1>
<p>간단히 무료 Dyno를 통해 Heroku에 올려두었다.<br />
DB row도 10000줄까지 밖에 지원하지 않지만 혼자쓰니 문제없겠지..</p>

<p><a href="https://workoutcal.herokuapp.com">https://workoutcal.herokuapp.com</a></p>


    <article>
    <div class="post-more">
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/django/%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4/2017/06/09/django-scheduler-(2)/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/django/%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4/2017/06/09/django-scheduler-(2)/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/django/%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4/2017/06/08/django-scheduler-(1)/">
        Django를 이용한 스케쥴러 제작 (1) - 정의 및 구성
      </a>
    </h1>

    <span class="post-date">08 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#django" class="post-tag">Django</a>
    
    <a href="/blog/tags/#web-service" class="post-tag">Web service</a>
    
    <a href="/blog/tags/#python" class="post-tag">Python</a>
    
    <a href="/blog/tags/#scheduler" class="post-tag">Scheduler</a>
    
    <a href="/blog/tags/#material-design" class="post-tag">Material Design</a>
    
    

    <article>
      <h1 id="발단">발단</h1>
<p>1일 1커밋을 생활화하기 위해 Django를 이용한 간단한 서비스를 만들기로 했다.<br />
운동을 좋아하는 만큼 운동 스케쥴러를 작성하기로 했고, 프로젝트 목표와 개발 방향을 설정했다.</p>

<h1 id="목표">목표</h1>
<ol>
  <li>스스로 사용할 만한 서비스 구축</li>
  <li>깔끔한 디자인</li>
  <li>확장성(?)</li>
</ol>

<h1 id="요구사항">요구사항</h1>
<ol>
  <li>일정을 추가할 수 있고, 일별/월별 보기가 가능할 것</li>
  <li>당일 해야할 운동 종류를 표시하며, 해당 Todo 리스트에서 수행 여부를 표시할 수 있을 것</li>
  <li>수행한 항목의 수행 시간에 비율을 그래프로 출력할 것</li>
</ol>

<h1 id="db-구성">DB 구성</h1>
<p>크게 운동 종류를 나타낸 Category 테이블을 만들고, 카테고리 테이블을 Foreign key로 이용한 List 테이블,<br />
마지막으로 각각의 개별 운동을 나타내는 Workout 테이블을 생성했다.<br />
테이블 상세 구성은 아래와 같다.</p>

<h2 id="workout-list-테이블">Workout List 테이블</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">id</th>
      <th style="text-align: center">workout_title</th>
      <th style="text-align: center">category_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">PK</td>
      <td style="text-align: center">개별 운동 이름</td>
      <td style="text-align: center">FK(Category)</td>
    </tr>
  </tbody>
</table>

<h2 id="workout-category-테이블">Workout Category 테이블</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">id</th>
      <th style="text-align: center">category_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">PK</td>
      <td style="text-align: center">운동 카테고리 이름</td>
    </tr>
  </tbody>
</table>

<h2 id="workout-테이블">Workout 테이블</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: center">id</th>
      <th style="text-align: center">create_date</th>
      <th style="text-align: center">workout_done</th>
      <th style="text-align: center">owner_id</th>
      <th style="text-align: center">workout_id</th>
      <th style="text-align: center">duration</th>
      <th style="text-align: center">workout_date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">PK</td>
      <td style="text-align: center">생성일</td>
      <td style="text-align: center">운동 수행여부</td>
      <td style="text-align: center">소유자</td>
      <td style="text-align: center">FK(List)</td>
      <td style="text-align: center">수행시간(분)</td>
      <td style="text-align: center">수행 날짜</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h1 id="app-구성-및-외부-라이브러리">App 구성 및 외부 라이브러리</h1>
<p>App은 할일을 출력하는 todolist, 월별 목록을 출력하는 calendar,<br />
그래프를 출력하는 stats의 세 부분으로 구성되어 있다.</p>

<p>전체적인 Look&amp;Feel은 심플한 Material Design 형태로 가기로 하고, <a href="http://materializecss.com/getting-started.html">Materialize</a>를 이용했다.<br />
그래프를 출력하기 위해서는 <a href="https://github.com/plotly/plotly.py">Plotly</a>와 <a href="https://matplotlib.org/gallery.html">Matplotlib</a>을 고민하다 최종적으로 matplotlib으로 결정하였다.</p>

<p><a href="https://minyoungjung.github.io/파이썬/django/웹서비스/2017/06/09/django-scheduler-(2)/">Django를 이용한 스케쥴러 제작 (2) - 구현</a></p>


    <article>
    <div class="post-more">
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/django/%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4/2017/06/08/django-scheduler-(1)/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/django/%EC%9B%B9%EC%84%9C%EB%B9%84%EC%8A%A4/2017/06/08/django-scheduler-(1)/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/2017/06/07/python-venv-export/">
        Python 가상환경 옮기기
      </a>
    </h1>

    <span class="post-date">07 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#virtualenv" class="post-tag">Virtualenv</a>
    
    <a href="/blog/tags/#python" class="post-tag">Python</a>
    
    <a href="/blog/tags/#matplotlib" class="post-tag">Matplotlib</a>
    
    

    <article>
      <h1 id="발단">발단</h1>
<p>가상환경을 이용한 로컬 프로젝트에서 matplotlib을 임포트 하려니 임포트 에러가 발생했다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(tensorflow_venv) My-MacBook-Pro:tensorflow_demo mymacpro$ python3 linearregression.py 
Traceback (most recent call last):
File "linearregression.py", line 14, in &lt;module&gt;
import matplotlib.pyplot as plt
File "/Users/mymacpro/Documents/Python_workspace/tensorflow_demo/tensorflow_venv/lib/python3.6/site-packages/matplotlib/pyplot.py", line 115, in &lt;module&gt;
_backend_mod, new_figure_manager, draw_if_interactive, _show = pylab_setup()
File "/Users/mymacpro/Documents/Python_workspace/tensorflow_demo/tensorflow_venv/lib/python3.6/site-packages/matplotlib/backends/__init__.py", line 32, in pylab_setup
globals(),locals(),[backend_name],0)
File "/Users/mymacpro/Documents/Python_workspace/tensorflow_demo/tensorflow_venv/lib/python3.6/site-packages/matplotlib/backends/backend_macosx.py", line 19, in &lt;module&gt;
from matplotlib.backends import _macosx
RuntimeError: Python is not installed as a framework. The Mac OS X backend will not be able to function correctly if Python is not installed as a framework. See the Python documentation for more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or try one of the other backends. If you are using (Ana)Conda please install python.app and replace the use of 'python' with 'pythonw'. See 'Working with Matplotlib on OSX' in the Matplotlib FAQ for more information.
</code></pre></div></div>

<p>라이브러리의 FAQ를 보니 virtualenv 대신에 venv를 이용하여 가상환경을 이용하란다.</p>

<h1 id="해결-방법">해결 방법</h1>
<ol>
  <li><code class="highlighter-rouge">pip3 freeze &gt; requirements.txt</code>로 기존 가상환경의 패키지 리스트를 추출한다.</li>
  <li><code class="highlighter-rouge">python3 -m venv myvenv</code>로 myenv라는 새로운 가상환경을 만든다.</li>
  <li><code class="highlighter-rouge">source myvenv/bin/activate</code>로 myenv 가상환경을 실행한다.</li>
  <li><code class="highlighter-rouge">pip3 install -r requirements.txt</code>를 통해 전에 있던 가상환경에서 추출한 패키지 리스트를 다시 설치한다.</li>
  <li>필요하다면 (기존 가상환경을 삭제한다.)</li>
</ol>

<h2 id="결과">결과</h2>

<p><img src="/post_assets/2017-06-07/matplotlib_plot.png" alt="그래프" /></p>


    <article>
    <div class="post-more">
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/2017/06/07/python-venv-export/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/2017/06/07/python-venv-export/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/git/2017/06/06/git-conflic-solving/">
        Git Merge 충돌 해결 원인 파악하기
      </a>
    </h1>

    <span class="post-date">06 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#github" class="post-tag">Github</a>
    
    <a href="/blog/tags/#git" class="post-tag">Git</a>
    
    

    <article>
      <h1 id="발단">발단</h1>

<p>로컬의 프로젝트를 Github로 푸쉬하려는데 문제가 발생했다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(workoutscheduler) My-MacBook-Pro:workoutscheduler mymacpro$ git push origin master
To https://github.com/MinyoungJung/workoutscheduler_project.git
! [rejected]        master -&gt; master (non-fast-forward)
error: failed to push some refs to 'https://github.com/MinyoungJung/workoutscheduler_project.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
</code></pre></div></div>
<p>메시지를 보니 Github 브랜치 내용이 로컬의 브랜치 내용보다 최신이란다.</p>

<h1 id="해결-방안">해결 방안</h1>
<ol>
  <li>
    <p><code class="highlighter-rouge">git push -f</code>를 통해 강제로 푸쉬한다.<br />
사실 혼자 로컬에서 작업하는 프로젝트다보니 Github 내용이 더 최신이 된 것 자체가 이상한 상황이고,<br />
로컬의 코드를 그냥 푸쉬해서 덮어씌워도 아무 문제 없으나 아무래도 찜찜한 것이 사실.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">gitk HEAD @{u}</code> 명령어로 upstream branch와 현재 헤드의 차이를 확인한다.
<img src="/post_assets/2017-06-06/conflict.png" alt="머지 충돌" />
master와 origin 사이의 충돌이 생긴 이유가 명확해졌다.<br />
project setting에서 github page를 생성했더니, 그에 대한 파일이 변경된 것이 로컬에서는 반영되지 않은 것.<br />
원인을 파악했으니 편안한 맘으로 강제로 푸쉬할 수 있게 되었다.</p>
  </li>
</ol>


    <article>
    <div class="post-more">
      
      <a href="/git/2017/06/06/git-conflic-solving/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/git/2017/06/06/git-conflic-solving/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/2017/06/05/overriding-python-standard-library/">
        파이썬 오브젝트 소스코드 간단히 보기 및 스탠다드 라이브러리 메소드 오버라이딩
      </a>
    </h1>

    <span class="post-date">05 Jun 2017</span>
     | 
    
    <a href="/blog/tags/#python" class="post-tag">Python</a>
    
    <a href="/blog/tags/#python-calendar" class="post-tag">Python Calendar</a>
    
    

    <article>
      <h1 id="파이썬-오브젝트-소스-코드-보기">파이썬 오브젝트 소스 코드 보기</h1>
<ol>
  <li>
    <p><code class="highlighter-rouge">inspect</code> 모듈 임포트
<code class="highlighter-rouge">import inspect</code></p>
  </li>
  <li>
    <p>살펴볼 오브젝트 임포트
<code class="highlighter-rouge">from calendar import HTMLCalendar</code></p>
  </li>
  <li>
    <p>소스코드를 보기좋은 형태로 출력
<code class="highlighter-rouge">print(inspect.getsource(HTMLCalendar))</code></p>
  </li>
</ol>

<h1 id="스탠다드-라이브러리-메소드-오버라이딩">스탠다드 라이브러리 메소드 오버라이딩</h1>
<p>HTMLCalendar는 베이스 클래스인 Calendar를 상속받아 HTML 달력을 만들어주는 역할을 하는 클래스이다.<br />
0(월요일:디폴트)에서 6(일요일)까지 달력의 시작을 정의하는 하나의 firstweekday인자를 전달받는다.</p>

<p><code class="highlighter-rouge">print(calendar.HTMLCalendar(6).formatmonth(2017,6))</code>과 같이 입력하면 아래의 달력이 출력된다.</p>

<table border="0" cellpadding="0" cellspacing="0" class="month">
<tr><th colspan="7" class="month">June 2017</th></tr>
<tr><th class="sun">Sun</th><th class="mon">Mon</th><th class="tue">Tue</th><th class="wed">Wed</th><th class="thu">Thu</th><th class="fri">Fri</th><th class="sat">Sat</th></tr>
<tr><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="thu">1</td><td class="fri">2</td><td class="sat">3</td></tr>
<tr><td class="sun">4</td><td class="mon">5</td><td class="tue">6</td><td class="wed">7</td><td class="thu">8</td><td class="fri">9</td><td class="sat">10</td></tr>
<tr><td class="sun">11</td><td class="mon">12</td><td class="tue">13</td><td class="wed">14</td><td class="thu">15</td><td class="fri">16</td><td class="sat">17</td></tr>
<tr><td class="sun">18</td><td class="mon">19</td><td class="tue">20</td><td class="wed">21</td><td class="thu">22</td><td class="fri">23</td><td class="sat">24</td></tr>
<tr><td class="sun">25</td><td class="mon">26</td><td class="tue">27</td><td class="wed">28</td><td class="thu">29</td><td class="fri">30</td><td class="noday">&nbsp;</td></tr>
</table>

<p>오브젝트 소스코드를 살펴보고 HTML Calendar의 첫번째 row에 좌/우 이동 화살표(&lt;,&gt;)를 출력해보자.</p>

<p><strong>파이썬 라이브러리 코드</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">formatmonthname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theyear</span><span class="p">,</span> <span class="n">themonth</span><span class="p">,</span> <span class="n">withyear</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="s">"""
    Return a month name as a table row.
    """</span>
    <span class="k">if</span> <span class="n">withyear</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="p">(</span><span class="n">month_name</span><span class="p">[</span><span class="n">themonth</span><span class="p">],</span> <span class="n">theyear</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="n">month_name</span><span class="p">[</span><span class="n">themonth</span><span class="p">]</span>
    <span class="k">return</span> <span class="s">'&lt;tr&gt;&lt;th colspan="7" class="month"&gt;</span><span class="si">%</span><span class="s">s&lt;/th&gt;&lt;/tr&gt;'</span> <span class="o">%</span> <span class="n">s</span>
</code></pre></div></div>

<p>주석을 보면 달 이름을 테이블 행 형태로 돌려주는 메소드이고, 리턴값은 HTML의 형태인 것을 알 수 있다.<br />
해당 메소드를 바로 오버라이딩 하면 <code class="highlighter-rouge">month_name[themonth]</code> 구문에서 오류가 뜨는데,<br />
month_name은 calendar 모듈의 Data 속성이므로 <code class="highlighter-rouge">from calendar import month_name</code>를 해야한다.</p>

<p><strong>오버라이딩한 메소드</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">calendar</span> <span class="kn">import</span> <span class="n">HTMLCalendar</span><span class="p">,</span> <span class="n">month_name</span>

<span class="k">class</span> <span class="nc">ArrowCalendar</span><span class="p">(</span><span class="n">HTMLCalendar</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">firstweekday</span><span class="p">):</span>
        <span class="n">HTMLCalendar</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">firstweekday</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">formatmonthname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">withyear</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">withyear</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="p">(</span><span class="n">month_name</span><span class="p">[</span><span class="n">month</span><span class="p">],</span> <span class="n">year</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="n">month_name</span><span class="p">[</span><span class="n">month</span><span class="p">]</span>
        <span class="k">return</span> <span class="s">'&lt;tr&gt;&lt;th colspan="1" class="month_arrow"&gt; &lt; &lt;/th&gt;'</span> \
            <span class="s">'&lt;th colspan="5" class="month"&gt;</span><span class="si">%</span><span class="s">s&lt;/th&gt;'</span> \
            <span class="s">'&lt;th colspan="1" class="month_arrow"&gt; &gt; &lt;/th&gt;&lt;/tr&gt;'</span> <span class="o">%</span> <span class="n">s</span>
</code></pre></div></div>
<p>7칸짜리 테이블로 달 이름을 넘겨주는 것을 5칸으로 줄이고 양쪽에 한칸씩 좌/우 화살표를 넣었다.<br />
이후 css 클래스를 적용해서 화살표를 정렬하면 완성</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.month_arrow</span> <span class="p">{</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="완성된-달력">완성된 달력</h2>
<table border="0" cellpadding="0" cellspacing="0" class="month">
<tr><th colspan="1" class="month_arrow"> &lt; </th><th colspan="5" class="month">June 2017</th><th colspan="1" class="month_arrow"> &gt; </th></tr>
<tr><th class="sun">Sun</th><th class="mon">Mon</th><th class="tue">Tue</th><th class="wed">Wed</th><th class="thu">Thu</th><th class="fri">Fri</th><th class="sat">Sat</th></tr>
<tr><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="noday">&nbsp;</td><td class="thu">1</td><td class="fri">2</td><td class="sat">3</td></tr>
<tr><td class="sun">4</td><td class="mon">5</td><td class="tue">6</td><td class="wed">7</td><td class="thu">8</td><td class="fri">9</td><td class="sat">10</td></tr>
<tr><td class="sun">11</td><td class="mon">12</td><td class="tue">13</td><td class="wed">14</td><td class="thu">15</td><td class="fri">16</td><td class="sat">17</td></tr>
<tr><td class="sun">18</td><td class="mon">19</td><td class="tue">20</td><td class="wed">21</td><td class="thu">22</td><td class="fri">23</td><td class="sat">24</td></tr>
<tr><td class="sun">25</td><td class="mon">26</td><td class="tue">27</td><td class="wed">28</td><td class="thu">29</td><td class="fri">30</td><td class="noday">&nbsp;</td></tr>
</table>


    <article>
    <div class="post-more">
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/2017/06/05/overriding-python-standard-library/#disqus_thread"> <i class="fa fa-comments" aria-hidden="true"></i>Comment</a>&nbsp;
      
      <a href="/%ED%8C%8C%EC%9D%B4%EC%8D%AC/2017/06/05/overriding-python-standard-library/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page12">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/page10">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-67856795-3', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//ringsterz.disqus.com/count.js" async></script>
  

  <!--Import jQuery -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>

  <script>
    // Calculate total_blogging_date_dynamically
    $(document).ready(function() {
      var date_str = "2017-05-31 00:00:00 +0900"; // 2017-05-31 00:00:00 +0900
      var today = new Date()
      today.setHours(0,0,0,0)
      var firstday = new Date(date_str.split(' ')[0])
      firstday.setHours(0,0,0,0)
      var total_date = ((today-firstday) / 86400000)+1; // calc datediff
      $("#dynamic_day").text(total_date);
    });

    // Calculate current_date_streak dynamically
    $(document).ready(function(){
      var latest_post_date_str = "2020-03-02 00:00:00 +0900";
      var day_passed = Math.floor((Date.now() - Date.parse(latest_post_date_str.split(' ')[0])) / 86400000);
      // if latest posting date passed a day then reset to 0
      if (day_passed > 1) {
        $("#current_date_streak").text("0");
      }
    });
  </script>
</html>
